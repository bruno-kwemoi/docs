---
title: "Subscribers"
---

In Novu, we call the entities designed to receive notifications as `Subscribers`. Each subscriber is unique and identified by a unique subscriberId.

<Note>
  We recommend using the internal unique id your application uses for a specific
  user as the `subscriberId`.
</Note>

Each subscriber has the following data points:

- **User Data** - Data stored in the subscriber object that you can easily access in your notification templates. This contains basic info such as first name, last name, avatar, locale, email, and phone. This data is fixed and structured.
- **Custom Data** - Apart from the above fixed structured user data, any unstructured custom data such as user's address, nationality, height, etc can also be stored in the `data` field using key-value pairs.
- **Channel Specific Credentials** - `deviceTokens` required to send push notifications and `webhookUrl` for chat channel providers can also be stored.

## Subscriber attributes

| Field        | Type   | Required | Example                               |
| :----------- | :----- | :------- | :------------------------------------ |
| subscriberId | string | true     | b0bea066-f5fe-11ed-b67e-0242ac120002  |
| firstName    | string | false    | John                                  |
| lastName     | string | false    | Doe                                   |
| email        | string | false    | john.doe@domain.org.                  |
| phone        | string | false    | +13603963366                          |
| locale       | string | false    | en                                    |
| avatar       | string | false    | https://example.com/images/avatar.jpg |
| data         | object | false    | `{"key": "value"}`                    |

## Subscriber response schema

**Novu subscriber object**

```json
{
  "_id": "NOVU_GENERATED_SUBSCRIBER_ID",
  "_organizationId": "NOVU_GENERATED_ORG_ID",
  "_environmentId": "NOVU_GENERATED_ENV_ID",
  "firstName": "John",
  "lastName": "Doe",
  "subscriberId": "subscriberId",
  "email": "[john.doe@org.com](mailto:john.doe@org.com)",
  "phone": "+98712345670"
  "data": {
    "custome_key_1" : "custom_value_1",
    "custome_key_2" : "custom_value_2"
  }
  "channels": [
  {
    "credentials": {
      "deviceTokens": [
        "token1",
        "token2"
      ]
    },
    "_integrationId": "NOVU_GENERATED_INTEGRATION_ID",
    "providerId": "fcm"
  },
  {
    "credentials": {
      "webhookUrl": "URL"
    },
    "_integrationId": "NOVU_GENERATED_INTEGRATION_ID",
    "providerId": "discord"
  }
  ],
  "deleted": false,
  "createdAt": "2022-10-13T17:40:53.231Z",
  "updatedAt": "2022-10-13T17:41:53.238Z",
  "__v": 0,
  "isOnline": false,
  "lastOnlineAt": "2022-10-13T17:41:53.238Z",
  "avatar": "AVATAR_URL",
  "id": "NOVU_GENERATED_SUBSCRIBER_ID"
}
```

## Creating a subscriber

We support creating new subscriber using two ways, `Ahead of Trigger` means adding subscribers before triggering notification or `Just-in-time` means sending complete subscriber data in `to` field while triggering.

### Just-in-time

A non-existing subscriber can be added by sending subscriber data in `to` field of the trigger method. If any subscriber with provided `subscriberId` does not exists, a new subscriber will be created. In this case, subscriber will be created first and then the trigger will be executed synchronously.

<Tabs>
    <Tab title="Node.js">
        ```jsx
        import { Novu } from '@novu/node';

        const novu = new Novu('<NOVU_API_KEY>');

        await novu.trigger('<WORKFLOW_TRIGGER_IDENTIFIER>', {
            to: {
                subscriberId: '111',
                email: 'john.doe@domain.com',
                firstName: 'John',
                lastName: 'Doe',
                phone: '+13603963366',
            },
            payload: {
                customVariable: 'variableValue',
                organization: {
                    logo: 'https://organization.com/logo.png',
                },
            },
        });
        ```
    </Tab>
    <Tab title="PHP">
        ```php
        use Novu\SDK\Novu;

        $novu = new Novu('<NOVU_API_KEY>');

        $novu->triggerEvent([
        'name' => '<WORKFLOW_TRIGGER_IDENTIFIER>',
            'to' => [
            'subscriberId' => '111',
            'email' => 'john.doe@domain.com',
            'firstName' => 'John',
            'lastName'  => 'Doe',
            'phone' => '+13603963366'
            ]
            'payload' => [
            'customVariable' => 'variableValue',
            'organization' => [
            'logo' => 'https://organization.com/logo.png',
            ]
            ],
            ]);
            ```
    </Tab>

</Tabs>

You can also pass only the `subscriberId` during a request, and hydrate the data directly from your database or other sources during the trigger execution. This is useful when you don't want to store all the subscriber data in Novu.

### Migration (Optional)

Create the subscriber and then trigger the notification to this subscriber. Here `subscriberId` is the required field and other fields are optional.

<Tabs>
  <Tab title="Node.js">
```jsx
import { Novu } from '@novu/node';

const novu = new Novu('<NOVU_API_KEY>');

await novu.subscribers.identify('111', {
  email: 'john.doe@domain.com',
  firstName: 'John',
  lastName: 'Doe',
  phone: '+13603963366',
  avatar: 'https://example.com/images/avatar.jpg',
  locale: 'en-US',
  data: { customKey1: 'customVal1', customKey2: 'customVal2' },
});

````
  </Tab>

  <Tab title="PHP">
```php
use Novu\SDK\Novu;

$novu = new Novu('<NOVU_API_KEY>');

$novu->createSubscriber([
    'subscriberId' => '111',
    'email' => 'john.doe@domain.com',
    'firstName' => 'John',
    'lastName' => 'Doe',
    'phone' => '+13603963366',
    'avatar' => 'https://example.com/images/avatar.jpg',
    'locale' => 'en',
    'data' => [
      'customKey1' => 'customVal1',
      'customKey2' => 'customVal2'
    ]
]);
````

  </Tab>
</Tabs>

Novu will create a subscriber if one does not exist and will update the existing subscriber based on the `identify` payload. You can call this function during registration or signup to make sure the subscriber data is up-to-date, if you wish to save additional attributes with a subscriber, you can pass additional custom data in the **data** field as key-value pairs.

## Bulk Subscriber Creation

You can create subscribers in bulk _(up to 500 at once)_ via the SDKs or [API](/api-reference/subscribers/bulk-create-subscribers).

## Export Subscribers

Currently, Novu does not support exporting subscribers. However, [Get Subscribers API](/api-reference/subscribers/get-subscribers) can be used to fetch subscribers

<Tabs>
<Tab title="Node.js">
### Steps:
- `mkdir export_novu_subscribers`
- `cd export_novu_subscribers`
- Save below code in `fetch_subscribers.js` file
- `npm init -y`
- `npm install axios fast-csv fs`
- Run `node fetch_subscribers.js`
- Subscribers are exported in `subscribers.csv` file

```javascript
const axios = require("axios");
const fs = require("fs");
const csv = require("fast-csv");

// Use https://eu.api.novu.co/v1/subscribers for eu region
const API_URL = "https://api.novu.co/v1/subscribers";

// Replace with actual API key
const API_KEY = "API_KEY";

const COLUMNS = [
  "subscriberId",
  "firstName",
  "lastName",
  "email",
  "phone",
  "avatar",
  "data",
];

async function fetchAllData() {
  let data = [];
  let page = 0;
  let hasMore = true;

  while (hasMore) {
    const response = await axios.get(API_URL, {
      params: { page },
      headers: {
        Authorization: `ApiKey ${API_KEY}`,
      },
    });

    data = data.concat(response.data.data);
    hasMore = response.data.hasMore;
    page++;
  }

  return data;
}

async function writeDataToCSV(data) {
  return new Promise((resolve, reject) => {
    const ws = fs.createWriteStream("subscribers.csv");
    const csvStream = csv.format({ headers: COLUMNS });

    csvStream.pipe(ws);

    data.forEach((row) => {
      csvStream.write(row);
    });

    csvStream.end();

    ws.on("finish", () => {
      resolve();
    });

    ws.on("error", (error) => {
      reject(error);
    });
  });
}

async function main() {
  try {
    const allData = await fetchAllData();
    await writeDataToCSV(allData);
    console.log("Data written to subscribers.csv");
  } catch (error) {
    console.error("Error:", error);
  }
}

main();
```
</Tab>

<Tab title="Shell Script">
### Steps:
- Save below code in a file with name fetch_subscribers.sh
- Run `chmod +x fetch_subscribers.sh`
- Run `./fetch_subscribers.sh`
- Subscribers are exported in `subscribers.csv` file
```Shell
#!/bin/bash

# Use https://eu.api.novu.co/v1/subscribers for eu region
API_URL="https://api.novu.co/v1/subscribers"

# Replace with actual API key
API_KEY="API_KEY"

OUTPUT_FILE="subscribers.csv"
COLUMNS="subscriberId,firstName,lastName,email,phone,avatar,data"

# Initialize an empty CSV file with the header row
echo "$COLUMNS" > "$OUTPUT_FILE"

page=0
hasMore=true

while [ "$hasMore" = true ]; do
  # Fetch data from the API
  response=$(curl -s -G "$API_URL" \
    --data-urlencode "page=$page" \
    -H "Authorization: ApiKey $API_KEY")

  # Output the response for debugging purposes
  # echo "Response from API (page $page):"
  # echo "$response" | jq .

  # Check if the response contains the expected data
  data=$(echo "$response" | jq -c '.data[]?')
  hasMore=$(echo "$response" | jq '.hasMore')

  if [ "$data" == "null" ]; then
    echo "No data found for page $page."
    break
  fi

  # Write the data to the CSV file
  echo "$data" | jq -r '[.subscriberId, .firstName, .lastName, .email, .phone, .avatar, .data] | @csv' >> "$OUTPUT_FILE"

  # Increment the page number
  page=$((page + 1))
done

echo "Data written to $OUTPUT_FILE"

```
</Tab>
</Tabs>